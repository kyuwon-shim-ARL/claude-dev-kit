🗂️ **레포정리 (Repository Organization & Cleanup)**

**📚 컨텍스트 자동 로딩:**
- 전체 프로젝트 파일 구조 스캔
- .gitignore 및 .claudeignore 설정 확인
- Git 히스토리에서 파일 이동/삭제 패턴 분석
- 디스크 사용량 및 불필요한 파일 감지

**🎯 역할: 체계적이고 유지보수 가능한 레포지토리 구조 확립**

## 1. 📊 **구조 분석 & 진단 (30% 비중)**

**레포지토리 헬스 체크:**
```python
# 전체 구조 분석
def analyze_repository_health():
    return {
        "root_clutter": count_root_files() > 15,  # 루트 파일 과다
        "deep_nesting": max_directory_depth() > 6,  # 과도한 중첩
        "orphaned_files": find_unreferenced_files(),  # 참조되지 않는 파일
        "duplicate_files": detect_duplicate_content(),  # 중복 파일
        "large_files": find_files_over_size_limit(),  # 대용량 파일
        "temp_files": find_temporary_files(),  # 임시 파일들
    }
```

**파일 분류 & 카테고리화:**
```
📁 자동 파일 분류:
├─ 🏠 Core (핵심): main.py, __init__.py, core modules
├─ 🧪 Tests: test_*.py, *_test.py, tests/ 디렉토리
├─ 📚 Docs: *.md, *.rst, docs/ 디렉토리  
├─ ⚙️  Config: *.json, *.yaml, *.toml, config files
├─ 🛠️  Tools: scripts/, tools/, utilities/
├─ 📦 Build: dist/, build/, *.egg-info/
├─ 🗑️  Temp: *.tmp, *.bak, *.log, cache files
└─ ❓ Unknown: 분류 불가능한 파일들
```

## 2. 🧹 **자동 정리 & 최적화 (40% 비중)**

**스마트 파일 이동:**
```bash
# 1. 루트 디렉토리 정리
echo "🏠 루트 디렉토리 정리 중..."

# 스크립트들을 scripts/ 디렉토리로
mkdir -p scripts/
find . -maxdepth 1 -name "*.sh" -exec mv {} scripts/ \;
find . -maxdepth 1 -name "*_script.py" -exec mv {} scripts/ \;

# 설정 파일들을 config/ 디렉토리로  
mkdir -p config/
find . -maxdepth 1 \( -name "*.yaml" -o -name "*.json" -o -name "*.toml" \) -exec mv {} config/ \;

# 문서들을 docs/ 디렉토리로
mkdir -p docs/
find . -maxdepth 1 -name "*.md" ! -name "README.md" ! -name "CLAUDE.md" -exec mv {} docs/ \;
```

**임시 파일 청소:**
```python
# 안전한 임시 파일 제거
def cleanup_temporary_files():
    temp_patterns = [
        "**/*.tmp", "**/*.bak", "**/*~", "**/._*",
        "**/.DS_Store", "**/Thumbs.db", "**/*.pyc",
        "**/__pycache__/", "**/.pytest_cache/",
        "**/node_modules/", "**/.venv/", "**/venv/"
    ]
    
    for pattern in temp_patterns:
        files = glob.glob(pattern, recursive=True)
        for file in files:
            safe_remove(file)  # Git 히스토리 보존하며 제거
```

**중복 파일 해결:**
```python
# 내용 기반 중복 파일 탐지 및 통합
def consolidate_duplicates():
    file_hashes = {}
    duplicates = []
    
    for file_path in all_files:
        file_hash = calculate_file_hash(file_path)
        if file_hash in file_hashes:
            duplicates.append((file_path, file_hashes[file_hash]))
        else:
            file_hashes[file_hash] = file_path
    
    # 중복 파일들을 심볼릭 링크나 imports로 대체
    for duplicate, original in duplicates:
        create_reference(duplicate, original)
```

## 3. 📁 **표준 디렉토리 구조 적용 (20% 비중)**

**Python 프로젝트 표준 구조:**
```
project-name/
├── README.md                 # 프로젝트 소개
├── CLAUDE.md                # Claude Code 프로젝트 설명
├── project_rules.md         # 프로젝트 헌법
├── requirements.txt         # 의존성
├── .gitignore              # Git 제외 파일
├── .claudeignore           # Claude 제외 파일
├── pyproject.toml          # 프로젝트 메타데이터
│
├── src/                    # 소스 코드
│   └── project_name/
│       ├── __init__.py
│       ├── core/           # 핵심 모듈
│       ├── models/         # 데이터 모델
│       ├── services/       # 비즈니스 로직
│       └── utils/          # 유틸리티
│
├── tests/                  # 테스트 코드
│   ├── unit/              # 단위 테스트
│   ├── integration/       # 통합 테스트
│   └── fixtures/          # 테스트 데이터
│
├── docs/                   # 문서화
│   ├── CURRENT/           # 현재 상태
│   ├── guides/            # 가이드
│   └── api/               # API 문서
│
├── scripts/                # 스크립트
│   ├── setup.sh           # 환경 설정
│   ├── test.sh            # 테스트 실행
│   └── deploy.sh          # 배포 스크립트
│
├── config/                 # 설정 파일
│   ├── development.yaml   # 개발 설정
│   ├── production.yaml    # 프로덕션 설정
│   └── test.yaml          # 테스트 설정
│
└── tools/                  # 개발 도구
    ├── linters/           # 코드 검사 도구
    ├── formatters/        # 포맷터
    └── generators/        # 코드 생성기
```

**자동 구조 마이그레이션:**
```python
# 현재 구조를 표준 구조로 마이그레이션
def migrate_to_standard_structure():
    migration_plan = analyze_current_vs_target_structure()
    
    for move_operation in migration_plan:
        if move_operation.is_safe():
            execute_move(move_operation.source, move_operation.target)
            update_all_references(move_operation.source, move_operation.target)
        else:
            log_manual_intervention_needed(move_operation)
```

## 4. 🔧 **의존성 & Import 정리 (10% 비중)**

**Import 문 정리:**
```python
# 모든 Python 파일의 import 문 최적화
def optimize_imports():
    for py_file in find_python_files():
        imports = analyze_imports(py_file)
        
        # 사용되지 않는 import 제거
        unused = find_unused_imports(py_file, imports)
        remove_imports(py_file, unused)
        
        # import 순서 표준화 (표준 라이브러리 → 3rd party → 로컬)
        reorder_imports(py_file)
        
        # 상대 import를 절대 import로 변경 (필요시)
        convert_relative_imports(py_file)
```

**의존성 정리:**
```bash
# requirements.txt 최적화
pip-autoremove -y  # 사용하지 않는 패키지 제거
pip freeze > requirements.txt  # 현재 환경 저장
pipdeptree --graph  # 의존성 그래프 확인
```

**📊 정리 진행 대시보드:**
```
🗂️ 레포정리 진행률:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 구조 분석:
  ✅ 파일 스캔: 1,247개 파일 분석 완료
  ✅ 분류 완료: 8개 카테고리로 분류
  ⚠️ 문제 발견: 23개 중복, 45개 임시 파일

🧹 자동 정리:
  ✅ 임시 파일 제거: 45개 → 0개  
  ✅ 루트 정리: 28개 → 8개 파일
  ✅ 중복 해결: 23개 → 5개 (통합 완료)

📁 구조 최적화:
  ✅ src/ 디렉토리 생성 및 이동
  ✅ tests/ 구조 정리
  ⏳ docs/ 재구성 진행 중...

🔧 의존성 정리:
  ✅ 사용하지 않는 import 제거: 127개
  ✅ Import 순서 표준화: 89개 파일
  ✅ requirements.txt 최적화: 34개 → 28개 패키지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 전체 진행률: 85% (ETA: 10분)
```

**🚫 정리 시 주의사항:**
```python
# 안전 장치들
safety_checks = {
    "backup_before_move": True,  # 이동 전 백업
    "preserve_git_history": True,  # Git 히스토리 보존
    "check_references": True,  # 참조 무결성 검사
    "test_after_move": True,  # 이동 후 테스트 실행
    "rollback_on_failure": True  # 실패 시 롤백
}
```

**✅ 완료 검증:**
```bash
# 정리 완료 후 자동 검증
echo "🔍 정리 결과 검증 중..."

# 프로젝트 구조 표준 준수 확인
python scripts/verify_structure.py

# 모든 import 문이 정상 동작하는지 확인  
python -m compileall src/

# 테스트 실행하여 기능 무결성 확인
pytest tests/ --tb=short

# 린팅으로 코드 품질 확인
flake8 src/ --max-line-length=88

echo "✅ 레포정리 완료 및 검증 통과"
```

**📝 자동 문서화:**
- 정리 결과를 docs/CURRENT/repository-cleanup.md에 저장
- 구조 변경 이력을 docs/CURRENT/structure-changes.md에 기록
- 향후 유지보수 가이드를 docs/guides/repository-maintenance.md에 작성

**💡 핵심 원칙:**
1. **안전성**: 모든 변경 전 백업 및 롤백 준비
2. **표준화**: 업계 표준 디렉토리 구조 적용
3. **자동화**: 반복 가능한 정리 프로세스 구축
4. **검증**: 정리 후 기능 무결성 자동 확인

**산출물: 깔끔하고 표준화된 레포지토리 구조 + 유지보수 자동화 시스템**