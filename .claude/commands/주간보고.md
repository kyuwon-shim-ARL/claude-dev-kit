# /주간보고 - Git 기반 스프린트 리뷰 v3.0

## 명령어 개요
**Git 커밋 데이터** 기반으로 실제 작업 성과를 **정량 측정**하고, **MECE 피라미드 구조**로 As-Is/To-Be/Gap을 명확히 제시하는 **스크럼 2025 모범사례** 준수 주간보고

## 사용법
```
/주간보고                    # 기본 1주 스프린트 기준
/주간보고 --period=2w        # 2주일 기준
/주간보고 --sprint=3         # 최근 3 스프린트 비교
/주간보고 --detailed         # 상세 커밋 분석 포함
```

## Claude 실행 프로세스

### 0단계: Git 기반 데이터 수집
```python
def collect_git_metrics(period="2w"):
    git_data = {
        "commits": git_log(f"--since='{period}'", "--pretty=format:'%h|%ad|%an|%s'"),
        "stats": git_log(f"--since='{period}'", "--stat", "--oneline"),
        "velocity": calculate_velocity(commits_per_week),
        "impact": analyze_commit_impact(lines_changed),
        "timeline": extract_sprint_phases(commit_dates)
    }
    return git_data
```

### 1단계: MECE 기반 성과 분류 및 측정
```python
def analyze_sprint_performance(git_data, period="2w"):
    # MECE 성과 분류: 전략-전술-운영 3계층 매트릭스
    performance = {
        "strategic": analyze_commits_by_type(["feat:", "refactor:", "BREAKING"]),  # 전략적 성과
        "tactical": analyze_commits_by_type(["fix:", "perf:", "improvement"]),    # 전술적 성과  
        "operational": analyze_commits_by_type(["docs:", "test:", "chore:"]),    # 운영적 성과
        "velocity": {
            "commits_per_week": len(git_data["commits"]) / weeks,
            "lines_per_week": total_lines_changed / weeks,
            "impact_score": calculate_weighted_impact(git_data["stats"])
        },
        "phase_progress": extract_development_phases(git_data["commits"])
    }
    return performance
```

### 2단계: As-Is/To-Be/Gap 정량 분석 (피라미드 구조)
```python
def analyze_as_is_to_be_gap(performance, historical_data):
    # 피라미드 구조: 핵심 메시지 도출
    analysis = {
        "executive_summary": {
            "key_insight": extract_top_insight(performance),           # 최상단: 핵심 인사이트
            "sprint_verdict": "SUCCESS|CONCERN|BLOCKED",               # 전체 판단
            "next_priority": determine_next_sprint_focus(performance)   # 다음 우선순위
        },
        
        "as_is_state": {  # 현재 상태 정량 측정
            "velocity_current": performance["velocity"]["commits_per_week"],
            "capacity_utilization": performance["velocity"]["impact_score"] / max_capacity,
            "phase_distribution": performance["phase_progress"],
            "bottlenecks": identify_bottlenecks_from_commits(performance)
        },
        
        "to_be_targets": {  # 목표 상태 (이전 스프린트 대비)
            "velocity_target": historical_data["avg_velocity"] * 1.1,
            "phase_goals": calculate_next_phase_targets(),
            "improvement_areas": prioritize_improvement_areas(performance)
        },
        
        "gap_analysis": {  # 차이 및 대응 방안
            "velocity_gap": calculate_velocity_gap(performance, historical_data),
            "blocked_items": extract_blockers_from_commits(performance),
            "self_resolvable": extract_actionable_items(performance),
            "help_needed": extract_external_dependencies(performance)
        }
    }
    return analysis
```

### 3단계: Start/Stop/Continue 스크럼 액션 아이템 생성
```python
def generate_scrum_action_items(gap_analysis, performance):
    # 스크럼 2025 모범사례: Start/Stop/Continue 방식
    action_items = {
        "start_doing": [  # 새로 시작할 내용
            {
                "action": identify_high_impact_actions(gap_analysis["improvement_areas"]),
                "command": suggest_claude_commands(),
                "estimated_sprint_points": estimate_effort(),
                "success_criteria": define_measurable_outcomes()
            }
        ],
        
        "stop_doing": [   # 중단할 내용
            {
                "inefficiency": identify_time_wasters(performance),
                "impact_of_stopping": calculate_opportunity_cost(),
                "alternative_approach": suggest_better_methods()
            }
        ],
        
        "continue_doing": [  # 유지할 내용 (잘 되고 있는 것)
            {
                "strength": identify_effective_patterns(performance),
                "amplification": suggest_scaling_methods(),
                "maintain_quality": define_sustainability_measures()
            }
        ],
        
        "blockers_external": gap_analysis["help_needed"],      # 외부 지원 필요
        "self_resolvable": gap_analysis["self_resolvable"]     # 자체 해결 가능
    }
    return action_items
```

### 4단계: 피라미드 구조 보고서 생성 (MECE + 정량화)
```python
def generate_pyramid_report(date, analysis, action_items):
    report_path = f"docs/CURRENT/weekly_report_git_based_{date}.md"
    
    # 피라미드 구조 보고서 템플릿
    report = f"""# 🎯 Sprint Review - Git 기반 실증 분석
*{date} | 정량 데이터 기반 객관적 성과 측정*

## 📊 Executive Summary (피라미드 최상단)

### 🔍 핵심 인사이트
**{analysis["executive_summary"]["key_insight"]}**

### 🎯 Sprint 종합 판정: **{analysis["executive_summary"]["sprint_verdict"]}**
- Velocity: {analysis["as_is_state"]["velocity_current"]:.1f} commits/week
- 다음 우선순위: **{analysis["executive_summary"]["next_priority"]}**

---

## 📈 As-Is Analysis (현재 상태 정량 측정)

### Velocity Metrics
| 메트릭 | 현재 스프린트 | 목표 | Gap | Status |
|--------|-------------|------|-----|---------|
| Commits/Week | {analysis["as_is_state"]["velocity_current"]:.1f} | {analysis["to_be_targets"]["velocity_target"]:.1f} | {analysis["gap_analysis"]["velocity_gap"]:+.1f} | {get_status_emoji(analysis["gap_analysis"]["velocity_gap"])} |
| Capacity 활용률 | {analysis["as_is_state"]["capacity_utilization"]*100:.0f}% | 85% | {(analysis["as_is_state"]["capacity_utilization"]-0.85)*100:+.0f}% | {get_capacity_status(analysis["as_is_state"]["capacity_utilization"])} |

### MECE 성과 분해
```
🏗️ Strategic (전략적)     ████████░░ {get_strategic_percentage(performance)}%
🔧 Tactical (전술적)      ██████████ {get_tactical_percentage(performance)}%  
⚙️ Operational (운영적)   ████░░░░░░ {get_operational_percentage(performance)}%
```

### Phase Progress
{visualize_phase_progress(analysis["as_is_state"]["phase_distribution"])}

---

## 🎯 To-Be Targets (목표 상태)

### Next Sprint Goals
{format_improvement_areas(analysis["to_be_targets"]["improvement_areas"])}

### Phase Transition Plan  
{format_phase_goals(analysis["to_be_targets"]["phase_goals"])}

---

## ⚡ Gap Analysis & Action Plan

### 🚀 START DOING (새로 시작)
{format_start_actions(action_items["start_doing"])}

### 🛑 STOP DOING (중단 결정)
{format_stop_actions(action_items["stop_doing"])}

### ✅ CONTINUE DOING (유지 강화)
{format_continue_actions(action_items["continue_doing"])}

---

## 🚧 Blockers & Support Needed

### 🆘 External Help Required
{format_external_blockers(action_items["blockers_external"])}

### 🛠️ Self-Resolvable (다음 스프린트 내 해결)
{format_self_resolvable(action_items["self_resolvable"])}

---

## 📊 Sprint Retrospective Dashboard

### Performance Trends
| Metric | 2 Sprints Ago | Last Sprint | Current | Trend | Target |
|--------|---------------|-------------|---------|-------|--------|
| Velocity | {get_historical_velocity(-2):.1f} | {get_historical_velocity(-1):.1f} | {analysis["as_is_state"]["velocity_current"]:.1f} | {get_trend_arrow()} | {analysis["to_be_targets"]["velocity_target"]:.1f} |
| Impact Score | {get_historical_impact(-2):.1f} | {get_historical_impact(-1):.1f} | {get_current_impact():.1f} | {get_impact_trend()} | {get_target_impact():.1f} |

### Commit Pattern Analysis
- **Most Productive Days**: {identify_productive_days(git_data)}
- **Peak Hours**: {identify_peak_hours(git_data)}
- **Collaboration Score**: {calculate_collaboration_score(git_data)}

### Success Patterns (Continue Amplifying)
{extract_success_patterns(performance)}

### Anti-Patterns (Stop Immediately)  
{extract_anti_patterns(performance)}

---

## 🎯 Next Sprint Commitment

### Sprint Goals (SMART)
{format_smart_goals(analysis["executive_summary"]["next_priority"])}

### Definition of Done
{define_completion_criteria(action_items)}

### Risk Mitigation
{identify_risks_and_mitigation(analysis)}

---

*📅 Next Review: {calculate_next_review_date()}*
*🔄 Sprint Cycle: {get_sprint_cycle_info()}*
*⏱️ Generated: {datetime.now().strftime('%Y-%m-%d %H:%M')}*
"""
    
    # 파일 저장
    write_file(report_path, report)
    return report_path
```

## 주요 개선점 (v2.0 → v3.0)

### ✅ 스크럼 2025 모범사례 적용
1. **Git 기반 객관적 측정**: PRD/문서 의존성 제거, 실제 작업 데이터 활용
2. **Start/Stop/Continue**: 명확한 액션 아이템, 구체적 개선 방향 제시
3. **MECE 피라미드 구조**: 핵심 인사이트 우선, 세부사항은 계층적 배치
4. **정량화 지표**: 모든 판단을 수치와 트렌드로 뒷받침

### ✅ As-Is/To-Be/Gap 체계적 분석
- **As-Is**: Git 데이터로 현재 상태 정확히 측정
- **To-Be**: 이전 스프린트 대비 개선 목표 설정  
- **Gap**: 구체적 차이와 해결 방안 제시

### ✅ 협업 중심 구조
- **자체 해결** vs **외부 지원** 명확히 분리
- **블로커 식별**: 팀 차원에서 우선 해결해야 할 이슈
- **성공 패턴**: 잘 되고 있는 것을 팀 전체가 공유

## 실행 예시

### 입력:
```
/주간보고
```

### Claude 실행:
1. **Git 데이터 수집**: 최근 2주간 커밋 히스토리 분석
2. **MECE 성과 분류**: 전략-전술-운영 레벨별 성과 측정  
3. **피라미드 구조 분석**: 핵심 인사이트 → 세부 분석 → 액션 아이템
4. **Start/Stop/Continue**: 스크럼 방식 구체적 개선 방향
5. **정량 보고서 생성**: 객관적 수치 기반 종합 리포트

### 출력 예시:
```markdown
# 🎯 Sprint Review - Git 기반 실증 분석
*2025-08-29 | 정량 데이터 기반 객관적 성과 측정*

## 📊 Executive Summary

### 🔍 핵심 인사이트
**레거시 코드 대규모 정리로 93% 코드베이스 최적화 달성, 테스트 100% 통과 유지**

### 🎯 Sprint 종합 판정: **SUCCESS**
- Velocity: 3.5 commits/week (목표 3.0 대비 +17%)  
- 다음 우선순위: **새로운 기능 개발 단계 전환**

## 📈 As-Is Analysis

### Velocity Metrics
| 메트릭 | 현재 스프린트 | 목표 | Gap | Status |
|--------|-------------|------|-----|---------|
| Commits/Week | 3.5 | 3.0 | +0.5 | ✅ |
| Capacity 활용률 | 95% | 85% | +10% | ⚠️ |

### MECE 성과 분해
```
🏗️ Strategic (전략적)     ████████░░ 80%
🔧 Tactical (전술적)      ██████░░░░ 60%  
⚙️ Operational (운영적)   ██████████ 100%
```

## ⚡ Gap Analysis & Action Plan

### 🚀 START DOING
- **신규 기능 개발 파이프라인 구축**: `/기획` → `/구현` → `/검증` 체계 도입
- **예상 Sprint Points**: 8 points
- **성공 기준**: 첫 번째 신규 기능 MVP 완료

### 🛑 STOP DOING  
- **과도한 리팩토링**: 현재 95% 용량 활용, 신규 개발에 집중 필요
- **대안**: 점진적 개선으로 전환

### ✅ CONTINUE DOING
- **E2E 테스트 100% 유지**: 품질 보증 패턴 확립됨
- **확대 방안**: 신규 기능에도 동일한 테스트 기준 적용

## 🚧 Blockers & Support Needed

### 🆘 External Help Required
- 없음 (현재 모든 작업이 자체 해결 가능 범위)

### 🛠️ Self-Resolvable
- 새로운 기능 요구사항 정의 및 우선순위 설정
- 개발 환경 신규 기능 지원 확장

---
*📅 Next Review: 2025-09-12*  
*🔄 Sprint Cycle: 2-week sprints*
```

## 효과

### 📈 객관성
- Git 커밋 데이터 기반으로 추측이 아닌 **실제 성과** 측정
- 정량적 지표로 **편향 없는 판단** 가능

### 🎯 실행력
- Start/Stop/Continue로 **구체적 행동 지침** 제공
- 자체 해결 vs 외부 지원 명확히 구분하여 **즉시 실행** 가능

### 🔄 지속 개선
- 이전 스프린트와 **정량 비교**로 개선 트렌드 추적
- 성공 패턴과 안티 패턴 식별로 **학습 누적**

### 🤝 팀 협업
- 피라미드 구조로 **핵심부터 세부까지** 계층적 이해
- 블로커와 해결책을 **팀 차원에서 공유**

---
*Git 기반 정량 데이터로 추측이 아닌 실제 성과를 측정합니다.*