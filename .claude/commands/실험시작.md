🧪 **실험시작 (Research Experiment Initialization)**

**🎯 목적**: 새로운 연구 실험을 위한 구조화된 작업 공간 생성

**📚 컨텍스트 자동 로딩:**
- project_rules.md 확인 (연구 프로젝트 철학 반영)
- research/experiments/current/ 확인 (기존 진행 실험 상태)
- docs/CURRENT/research-log.md 확인 (이전 실험 패턴 분석)

**📋 사용법:**
```
/실험시작 [실험명] [카테고리] [옵션]
```

**🚀 즉시 실행할 명령어들 (순서대로 실행):**

```bash
# 1. 타임스탬프와 실험 ID 생성
TIMESTAMP=$(date +%Y-%m-%d_%H%M)
EXPERIMENT_NAME="${1:-experiment}"
CATEGORY="${2:-exploratory}"
EXPERIMENT_ID="${TIMESTAMP}_${EXPERIMENT_NAME}"

# 2. 전체 폴더 구조 생성 (한 번에!)
mkdir -p "research/experiments/${EXPERIMENT_ID}"/{code/{utils,backup},data/{raw,processed,samples},results/{metrics,plots,models},docs,config,logs}

# 3. 실험 메타데이터 생성
cat > "research/experiments/${EXPERIMENT_ID}/config/experiment.json" << 'EOF'
{
  "experiment_id": "'${EXPERIMENT_ID}'",
  "name": "'${EXPERIMENT_NAME}'",
  "category": "'${CATEGORY}'",
  "created_at": "'$(date -Iseconds)'",
  "status": "active",
  "description": "",
  "tags": ["'${CATEGORY}'"]
}
EOF

# 4. 실험 노트 템플릿 생성
cat > "research/experiments/${EXPERIMENT_ID}/docs/notes.md" << 'EOF'
# 실험명: '${EXPERIMENT_NAME}'
**시작일**: '$(date +%Y-%m-%d)'
**카테고리**: '${CATEGORY}'

## 🎯 실험 목표
- [ ] 

## 📊 실험 설계
### 데이터
- 

### 방법론
- 

## 📈 진행 상황
### '$(date +%Y-%m-%d)' - 실험 시작
- 초기 설정 완료

## 🔍 발견사항
- 

## 📊 최종 결과
- 
EOF

# 5. 현재 실험 링크 업데이트
rm -f research/experiments/current
ln -sf "${EXPERIMENT_ID}" research/experiments/current

# 6. 성공 메시지 출력
echo "✅ 실험 환경 생성 완료: research/experiments/${EXPERIMENT_ID}"
echo "📁 현재 실험 링크 업데이트: research/experiments/current → ${EXPERIMENT_ID}"
```

**⚡ 실행 프로세스:**

## **1. 📊 실험 환경 분석**

**기존 실험 현황 확인:**
- `research/experiments/` 디렉토리 스캔
- 진행 중인 실험 식별 및 상태 확인
- 유사한 이전 실험 패턴 분석
- 네이밍 충돌 방지

**연구 카테고리 매핑:**
```python
research_categories = {
    "dataset": "데이터셋 분석 및 전처리",
    "features": "특성 공학 및 선택", 
    "modeling": "모델링 및 성능 최적화",
    "validation": "검증 및 평가",
    "exploratory": "탐색적 분석",
    "debugging": "디버깅 및 문제 해결"
}
```

## **2. 🏗️ 구조화된 실험 공간 생성**

**타임스탬프 기반 폴더 생성:**
```
research/experiments/YYYY-MM-DD_HHMM_[실험명]/
├── code/                    # 실험 코드
│   ├── main.py             # 메인 실험 스크립트
│   ├── utils/              # 유틸리티 함수들
│   └── backup/             # 코드 백업 (자동 생성)
├── data/                   # 실험용 데이터
│   ├── raw/               # 원본 데이터
│   ├── processed/         # 전처리된 데이터
│   └── samples/           # 샘플 데이터
├── results/               # 실험 결과
│   ├── metrics/           # 성능 지표들 (JSON)
│   ├── plots/            # 시각화 결과들
│   └── models/           # 학습된 모델들
├── docs/                 # 실험 문서
│   ├── notes.md          # 실험 노트 (자동 템플릿)
│   ├── methodology.md    # 방법론 설명
│   └── findings.md       # 발견사항 기록
├── config/               # 설정 파일들
│   ├── experiment.json   # 실험 메타데이터
│   ├── params.yaml      # 하이퍼파라미터
│   └── environment.txt   # 환경 정보
└── logs/                # 로그 파일들
    ├── debug.log        # 디버그 로그
    └── performance.log  # 성능 로그
```

**실험 메타데이터 생성:**
```json
{
  "experiment_id": "2024-11-15_1430_xgboost_tuning",
  "name": "xgboost_tuning",
  "category": "modeling",
  "created_at": "2024-11-15T14:30:00Z",
  "status": "active",
  "description": "XGBoost 하이퍼파라미터 최적화 실험",
  "parent_experiment": null,
  "tags": ["machine-learning", "hyperparameter-tuning"],
  "expected_duration": "2-4 hours",
  "success_criteria": {
    "accuracy_threshold": 0.90,
    "runtime_limit": "4 hours"
  }
}
```

## **3. 📝 템플릿 파일 자동 생성**

**실험 노트 템플릿 (notes.md):**
```markdown
# 실험명: {experiment_name}
**시작일**: {timestamp}  
**카테고리**: {category}  
**예상 소요시간**: {estimated_duration}

## 🎯 실험 목표
- [ ] 구체적 목표 1
- [ ] 구체적 목표 2 
- [ ] 성공 기준 정의

## 📊 실험 설계
### 데이터
- 데이터셋: 
- 크기: 
- 특징: 

### 방법론
- 접근법: 
- 알고리즘: 
- 평가 지표: 

## 📈 진행 상황
### {date} - 실험 시작
- 초기 설정 완료
- 

### 다음 단계
- [ ] 
- [ ] 

## 🔍 발견사항
### 성공한 접근
- 

### 실패한 시도
- 

### 교훈
- 

## 📊 최종 결과
### 성능 지표
- 정확도: 
- 처리 시간: 
- 메모리 사용량: 

### 결론
- 

### 다음 실험 제안
- 
```

## **4. 🔗 작업 환경 설정**

**현재 실험 링크 업데이트:**
```bash
# research/experiments/current/ -> 새 실험 디렉토리
ln -sf $(pwd)/research/experiments/{new_experiment_id} research/experiments/current
```

**실험 로그 등록:**
- 전체 실험 이력에 새 실험 추가
- `docs/CURRENT/research-log.md` 업데이트
- 실험 간 연관성 기록

## **📝 슬래시 커맨드 예시**

### 예시 1: 기본 모델링 실험
```
/실험시작 xgboost_optimization modeling

→ 출력:
🧪 새 실험 환경 생성 중...
📁 실험 ID: 2024-11-15_1430_xgboost_optimization
📂 디렉토리: research/experiments/2024-11-15_1430_xgboost_optimization/
📋 카테고리: modeling (모델링 및 성능 최적화)
✅ 구조화된 폴더 생성 완료
✅ 템플릿 파일들 생성 완료
✅ 현재 실험 링크 업데이트
🎯 다음 단계: docs/notes.md에서 실험 목표를 구체화하세요
```

### 예시 2: 탐색적 분석 실험
```
/실험시작 data_quality_check exploratory --duration "1 day"

→ 출력:
🧪 탐색적 분석 실험 환경 설정...
📁 실험 ID: 2024-11-15_1435_data_quality_check
📂 카테고리: exploratory (탐색적 분석)
⏱️ 예상 소요시간: 1 day
📊 탐색적 분석 특화 템플릿 적용
✅ 데이터 품질 체크 도구들 준비 완료
🔍 추천 다음 단계: data/raw/에 분석할 데이터를 배치하세요
```

### 예시 3: 기존 실험 확장
```
/실험시작 xgboost_v2 modeling --parent 2024-11-10_1200_xgboost_baseline

→ 출력:
🧪 기존 실험 확장 모드...
📁 부모 실험: 2024-11-10_1200_xgboost_baseline
📂 신규 실험: 2024-11-15_1440_xgboost_v2
🔗 부모 실험 결과 자동 참조 설정
📋 이전 실험의 성공 요소 템플릿에 반영
✅ 개선된 실험 환경 준비 완료
```

## **⚙️ 고급 옵션**

### 기본 옵션
```
--duration TIME     : 예상 소요시간 (예: "2 hours", "1 day")
--parent EXP_ID     : 부모 실험 지정 (확장/개선 실험)
--template TYPE     : 특수 템플릿 (ml/analysis/debug)
--priority LEVEL    : 우선순위 (high/medium/low)
```

### 고급 옵션
```
--no-current       : 현재 실험 링크 업데이트 안함
--minimal          : 최소한의 구조만 생성
--copy-from EXP_ID : 기존 실험에서 설정 복사
--tags "tag1,tag2" : 실험 태그 지정
```

## **🔗 워크플로우 연계**

### 다른 명령어와의 통합
```bash
# 1. 실험 시작
/실험시작 new_approach modeling

# 2. 실험 진행 (기존 개발 도구들 사용)
/구현 "실험 코드 작성"
/검증 "결과 검증"

# 3. 실험 완료 처리
/실험완료 current --status success

# 4. 보고서에 반영
/보고서작업 progress v2.1 --include-experiment current
```

## **💡 스마트 기능**

### 1. 자동 환경 감지
- 프로젝트 유형 감지 (Python/R/Jupyter 등)
- 필요한 의존성 자동 제안
- 기존 데이터셋 자동 연결

### 2. 충돌 방지
- 실험명 중복 자동 감지
- 리소스 사용량 체크
- 동시 실행 가능한 실험 수 제한

### 3. 지능형 추천
- 이전 성공 실험 패턴 분석
- 실패 요인 기반 주의사항 제시
- 관련 레퍼런스 자동 링크

## **🎯 성공 기준**

**완료 조건:**
- 구조화된 실험 환경 생성: 100%
- 템플릿 파일 생성: 100%  
- 메타데이터 정확성: 95%+
- 이전 실험과의 연관성 추적: 90%+

**품질 지표:**
- 실험 성공률 향상: 20%+ (구조화 효과)
- 실험 재현성: 95%+ (메타데이터 기록)
- 지식 누적 효율: 30%+ (체계적 관리)

ARGUMENTS: "${args}"