📚 **컨텍스트 (Smart Context Management & Analysis)**

**📚 컨텍스트 자동 로딩:**
- project_rules.md (프로젝트 헌법)
- claude.md (현재 코드베이스 상태)
- docs/CURRENT/ 전체 디렉토리
- Git 히스토리 최근 10개 커밋

**🎯 역할: Claude와의 협업을 위한 지능형 컨텍스트 관리**

## 1. 🧠 **컨텍스트 계층 분석 (30% 비중)**

**3단계 컨텍스트 구조:**
```
📋 컨텍스트 계층:
├─ 전략적 (Strategic): project_rules.md - 변경 불가능한 원칙
├─ 전술적 (Tactical): claude.md - 자동 갱신되는 현재 상태  
└─ 운영적 (Operational): docs/CURRENT/ - 실시간 작업 상태
```

**컨텍스트 품질 분석:**
```python
# 컨텍스트 일관성 검증
def analyze_context_quality():
    strategic = load_project_rules()
    tactical = load_claude_md()
    operational = load_current_docs()
    
    consistency = check_alignment(strategic, tactical, operational)
    completeness = check_missing_context()
    freshness = check_last_updated()
    
    return ContextQuality(
        consistency=consistency,
        completeness=completeness, 
        freshness=freshness
    )
```

## 2. 🔄 **자동 컨텍스트 동기화 (25% 비중)**

**Git Hook 기반 자동 갱신:**
```bash
# pre-commit hook 설정
#!/bin/sh
echo "🔄 컨텍스트 자동 갱신 중..."

# claude.md 자동 재생성
claude init --silent

# docs/CURRENT/ 상태 업데이트
python scripts/update_current_docs.py

# 컨텍스트 무결성 검사
python scripts/verify_context_integrity.py

if [ $? -eq 0 ]; then
    echo "✅ 컨텍스트 동기화 완료"
    git add claude.md docs/CURRENT/
else
    echo "❌ 컨텍스트 동기화 실패"
    exit 1
fi
```

**실시간 상태 추적:**
```python
# 작업 상태 실시간 추적
class ContextTracker:
    def track_session_progress(self):
        return {
            "current_task": self.get_active_task(),
            "completion_rate": self.calculate_progress(),
            "blockers": self.identify_blockers(),
            "next_actions": self.suggest_next_steps()
        }
```

## 3. 🎯 **스마트 컨텍스트 필터링 (20% 비중)**

**관련성 기반 컨텍스트 선별:**
```python
# 작업 관련성에 따른 컨텍스트 우선순위
def prioritize_context(task_type, current_files):
    if task_type == "bug_fix":
        priority = ["error_logs", "test_failures", "recent_changes"]
    elif task_type == "new_feature":
        priority = ["architecture_docs", "similar_implementations", "test_patterns"]
    elif task_type == "refactoring":
        priority = ["code_metrics", "dependency_graph", "performance_data"]
        
    return filter_relevant_context(priority, current_files)
```

**컨텍스트 크기 최적화:**
```python
# Claude 컨텍스트 창 최적화
def optimize_context_size():
    essential = load_essential_context()  # 항상 포함
    relevant = load_relevant_context()    # 작업 관련
    optional = load_optional_context()    # 여유 공간 시 포함
    
    total_tokens = count_tokens(essential + relevant + optional)
    if total_tokens > MAX_CONTEXT_SIZE:
        return truncate_by_priority(essential, relevant, optional)
    return essential + relevant + optional
```

## 4. 📊 **컨텍스트 품질 대시보드 (15% 비중)**

**실시간 품질 지표:**
```
📊 컨텍스트 품질 대시보드:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 일관성 (Consistency):
  • project_rules ↔ claude.md: 95% ✅
  • claude.md ↔ 실제 코드: 88% ✅
  • 문서 간 상호 참조: 92% ✅

🔄 최신성 (Freshness):
  • claude.md 마지막 갱신: 2분 전 ✅
  • docs/CURRENT/ 갱신: 5분 전 ✅  
  • Git 상태 동기화: 완료 ✅

📚 완성도 (Completeness):
  • 필수 컨텍스트: 100% (10/10) ✅
  • 권장 컨텍스트: 80% (8/10) ✅
  • 선택 컨텍스트: 60% (6/10) ⚠️

⚡ 성능 (Performance):
  • 컨텍스트 로딩 시간: 1.2초 ✅
  • 토큰 사용률: 78% (39K/50K) ✅
  • 압축 효율: 65% ✅
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 종합 점수: 87/100 (우수)
```

## 5. 🔍 **컨텍스트 검색 & 탐색 (10% 비중)**

**지능형 컨텍스트 검색:**
```bash
# 의미론적 검색
/컨텍스트 검색 "사용자 인증 관련 모든 정보"
# → project_rules.md의 보안 정책
# → claude.md의 auth 모듈 구조
# → docs/CURRENT/auth-implementation.md
# → 관련 테스트 파일들

# 시간 기반 검색
/컨텍스트 검색 --since="2 weeks ago" "성능 최적화"

# 파일 타입별 검색
/컨텍스트 검색 --type="test" "mock usage"
```

**컨텍스트 추천 시스템:**
```python
# 현재 작업에 도움될 컨텍스트 자동 추천
def suggest_helpful_context(current_task):
    similar_tasks = find_similar_historical_tasks(current_task)
    successful_patterns = extract_successful_patterns(similar_tasks)
    
    return {
        "recommended_files": successful_patterns.files,
        "suggested_approaches": successful_patterns.approaches,
        "potential_pitfalls": successful_patterns.common_issues
    }
```

**🚫 컨텍스트 안티패턴 감지:**
```python
# 문제가 될 컨텍스트 패턴 자동 감지
anti_patterns = {
    "outdated_context": "claude.md가 실제 코드와 불일치",
    "missing_essential": "project_rules.md가 없음",
    "context_bloat": "불필요한 컨텍스트로 토큰 낭비",
    "circular_reference": "문서 간 순환 참조",
    "version_mismatch": "문서별 버전 불일치"
}
```

**📝 자동 문서화:**
- 컨텍스트 품질 분석 결과를 docs/CURRENT/context-quality.md에 저장
- 컨텍스트 사용 패턴을 docs/CURRENT/context-usage-patterns.md에 기록
- 최적화 제안사항을 docs/CURRENT/context-optimization.md에 문서화

**💡 스마트 기능:**
1. **적응형 로딩**: 작업 타입에 따라 관련 컨텍스트 자동 선별
2. **예측적 캐싱**: 다음에 필요할 컨텍스트 미리 준비
3. **중복 제거**: 동일한 정보의 중복 로딩 방지
4. **압축 최적화**: 핵심 정보만 추출하여 토큰 효율성 극대화

**🎯 완료 조건:**
- 컨텍스트 일관성 > 90%
- 최신성: 모든 자동 갱신 완료  
- 완성도: 필수 컨텍스트 100%
- 성능: 로딩 시간 < 2초

**산출물: 최적화된 컨텍스트 환경 + Claude와의 효율적 협업 기반 구축**