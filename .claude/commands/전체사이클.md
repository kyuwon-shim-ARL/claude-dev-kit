<!--
@meta
id: document_20250905_1110_전체사이클
type: document
scope: operational
status: archived
created: 2025-09-05
updated: 2025-09-05
tags: commands, 전체사이클, 전체사이클.md, .claude
related: 
-->

🔄 **전체사이클 (True TADD Workflow)**

**🎯 새로운 워크플로우: 올바른 TADD 순서 강제**

이전: /기획 → /개발 → /안정화(테스트) → /릴리즈  
현재: **/기획 → /테스트(Red) → /구현(Green) → /배포(Refactor)**

==================================================

## 1️⃣ 🎯 **기획 (Planning & Requirements)**

**🤖 의도 감지:**
- 탐색 모드: "뭐야?", "어떻게?" → 분석만 제공
- 실행 모드: "추가", "개선" → PRD + 실패하는 테스트 생성

**📊 실행 모드 산출물:**
1. **PRD 작성**: 요구사항 및 성공 기준 정의
2. **실패하는 테스트 생성**:
   ```python
   def test_user_can_use_korean_commands():
       """사용자가 init.sh 실행 시 한글 명령어 사용 가능"""
       result = init_project("test")  # Will fail - not implemented
       assert Path("test/.claude/commands/기획.md").exists()
       assert Path("test/.claude/commands/기획.md").stat().st_size > 1000
   ```
3. **TodoWrite**: 구현 작업 목록

**✅ Theater Testing 방지:**
- ❌ `assert result is not None`
- ✅ `assert result.status_code == 200`
- Mock 사용률 < 20% 강제

==================================================

## 2️⃣ 🧪 **테스트 (Red Phase - Failing Tests)**

**TADD의 핵심**: 구현 전에 반드시 실패하는 테스트부터 작성

**Red Phase 목표:**
- 기능 명세를 테스트로 정의
- 의도적으로 실패하는 테스트 생성
- Theater Testing 자동 차단

==================================================

## 3️⃣ ⚡ **구현 (Green Phase - Make Tests Pass)**

**사전 조건:**
```bash
pytest tests/test_feature_spec.py
# Expected: ❌ 0/10 tests passing
```

**Red-Green 사이클:**
1. **RED**: 실패하는 테스트 확인
2. **GREEN**: 최소 코드로 테스트 통과
3. 실시간 피드백: `✅ 5/10 passing...`

**완료 조건:**
- 모든 테스트 GREEN
- Mock < 20%
- Coverage > 60%

==================================================

## 3️⃣ 🏗️ **안정화 (Refactoring Only)**

**이전 역할 제거:**
- ~~테스트 작성~~ → /기획으로 이동
- ~~기본 검증~~ → /구현에서 완료

**새로운 집중 영역:**
1. **구조 최적화 (60%)**
   - DRY 원칙 적용
   - 순환 의존성 해결
   - 디렉토리 구조 정리

2. **성능 최적화 (20%)**
   - 병목 지점 개선
   - 정량적 측정: "API 450ms → 120ms"

3. **추가 테스트 (20%)**
   - Property-based testing
   - Load/Security testing

**체크포인트:** 모든 테스트 여전히 GREEN?

==================================================

## 4️⃣ 🚀 **배포 (Refactor + Deployment)**

**📊 완성도 체크리스트:**
```
✅ 모든 테스트 통과
✅ Mock 사용률 < 20%
✅ 품질 점수 > 70
✅ Git push 완료
✅ 버전 태그 생성
```

**Real Testing 검증:**
```bash
python scripts/validate_test_quality.py
# Quality Score: 85/100 ✅
```

**필수: 원격 배포**
```bash
git push origin main
git tag v31.0
git push origin v31.0
```

==================================================

## 📊 워크플로우 비교

**기존 (Theater Testing 발생):**
```
/기획: 계획만
/구현: 테스트 없이 코딩
/안정화: 형식적 테스트 추가
결과: Mock 과다, 의미없는 테스트
```

**개선 (Real Testing 강제):**
```
/기획: 계획 + 실패하는 테스트
/구현: 테스트 통과시키기
/안정화: 리팩토링만
결과: Real 테스트, Mock 최소화
```

## 🎯 핵심 변경사항

1. **테스트가 명세**: 테스트 = 문서 = 계약
2. **Mock 제한**: 20% 이하 강제
3. **구체적 검증**: Theater Testing 자동 거부
4. **품질 게이트**: 70점 이상만 배포

## 💡 사용 예시

```bash
# 새 기능 개발
/전체사이클 한글 파일명 URL 인코딩 지원

AI 응답:
1. /기획: PRD 작성 + 3개 실패 테스트 생성
2. /구현: 0/3 → 3/3 테스트 통과
3. /안정화: 코드 정리, 성능 개선
4. /배포: 품질 검증 후 push

완료: Real Testing으로 검증된 고품질 코드
```

**이제 진짜 TADD가 작동합니다!**